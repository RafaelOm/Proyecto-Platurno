CREATE TABLE ALUMNO (ID_DNI VARCHAR(255) NOT NULL, APELLIDO1 VARCHAR(255), APELLIDO2 VARCHAR(255), CP VARCHAR(255), NOMBRE VARCHAR(255), DIRECCION VARCHAR(255), EMAIL_INSTITUCIONAL VARCHAR(255), EMAIL_PERSONAL VARCHAR(255), LOCALIDAD VARCHAR(255), MOVIL VARCHAR(255), PROVINCIA VARCHAR(255), TELEFONO VARCHAR(255), PRIMARY KEY (ID_DNI))
CREATE TABLE ASIGNATURA (REFERENCIA VARCHAR(255) NOT NULL, CARACTER VARCHAR(255), CODIGO INTEGER NOT NULL, CRED_PRAC INTEGER, CREDITOS INTEGER NOT NULL, CURSO VARCHAR(255), DURACION VARCHAR(255), IDIOMAS VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, OFERTADA VARCHAR(255) NOT NULL, MENCION VARCHAR(255), PLAZAS VARCHAR(255) NOT NULL, TITULACION_CODIGO VARCHAR(255), PRIMARY KEY (REFERENCIA))
CREATE TABLE CENTRO (ID VARCHAR(255) NOT NULL, DIRECCION VARCHAR(255), NOMBRE VARCHAR(255), TLF_CONSERJERIA VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE CLASE (HORAINICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, HORAFIN VARCHAR(255), ASIGNATURA_REFERENCIA VARCHAR(255), GRUPO_ID VARCHAR(255) NOT NULL, PRIMARY KEY (HORAINICIO, DIA, GRUPO_ID))
CREATE TABLE ENCUESTA (FECHA_DE_ENVIO DATE NOT NULL, EXPEDIENTE_IDEXPEDIENTE VARCHAR(255), PRIMARY KEY (FECHA_DE_ENVIO))
CREATE TABLE EXPEDIENTE (IDEXPEDIENTE VARCHAR(255) NOT NULL, ACTIVO VARCHAR(255), CREDITOSCF INTEGER, CREDITOSFB INTEGER, CREDITOSOB INTEGER, CREDITOSOP INTEGER, CREDITOSPE INTEGER, CREDITOSSUP INTEGER, CREDITOSTF INTEGER, N_ARCHIVO VARCHAR(255) NOT NULL, NOTAMPR VARCHAR(255), ALUMNO_ID_DNI VARCHAR(255), TITULACION_CODIGO VARCHAR(255), PRIMARY KEY (IDEXPEDIENTE))
CREATE TABLE GR_ASIG (CURSO_ACT INTEGER NOT NULL, OFERTA INTEGER NOT NULL, ASIG_REFERENCIA VARCHAR(255), GROUP_ID VARCHAR(255), PRIMARY KEY (CURSO_ACT))
CREATE TABLE GRUPO (ID VARCHAR(255) NOT NULL, CURSO INTEGER NOT NULL, INGLES VARCHAR(255) NOT NULL, LETRA VARCHAR(255) NOT NULL, PLAZAS INTEGER, TURNO VARCHAR(255) NOT NULL, ASIGNAR VARCHAR(255), LETRA1 VARCHAR(255), VISIBLE VARCHAR(255) NOT NULL, GRUPO_ID VARCHAR(255), TITULO_CODIGO VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE MAT_ASIG (ASIGNATURA_REFERENCIA VARCHAR(255) NOT NULL, GRUPO_ID VARCHAR(255), MATRICULA_CURSO_ACADEMICO BIGINT NOT NULL, PRIMARY KEY (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO))
CREATE TABLE MATRICULA (CURSO_ACADEMICO BIGINT NOT NULL, ESTADO VARCHAR(255), FECHA_MATRICULA DATE, LISTADO_DE_ASIGNATURAS VARCHAR(255), NUEVO_INGRESO VARCHAR(255), NUM_ARCHIVO VARCHAR(255), TURNO_PREFERENTE VARCHAR(255), PRIMARY KEY (CURSO_ACADEMICO))
CREATE TABLE TITULACION (CODIGO VARCHAR(255) NOT NULL, CREDITOS VARCHAR(255), NOMBRE VARCHAR(255), PRIMARY KEY (CODIGO))
CREATE TABLE ASIGNATURA_CLASE (Asignatura_REFERENCIA VARCHAR(255) NOT NULL, HORAINICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, GRUPO_ID VARCHAR(255) NOT NULL, PRIMARY KEY (Asignatura_REFERENCIA, HORAINICIO, DIA, GRUPO_ID))
CREATE TABLE Gr_Asig (asig_Ref VARCHAR(255) NOT NULL, grupo_Id VARCHAR(255) NOT NULL, PRIMARY KEY (asig_Ref, grupo_Id))
CREATE TABLE ASIGNATURA_MAT_ASIG (Asignatura_REFERENCIA VARCHAR(255) NOT NULL, MATRICULA_CURSO_ACADEMICO BIGINT NOT NULL, PRIMARY KEY (Asignatura_REFERENCIA, MATRICULA_CURSO_ACADEMICO))
CREATE TABLE Mat_Asig (asig_Ref VARCHAR(255) NOT NULL, matric_ca BIGINT NOT NULL, PRIMARY KEY (asig_Ref, matric_ca))
CREATE TABLE CentroTitulacion (Codigo VARCHAR(255) NOT NULL, Id VARCHAR(255) NOT NULL, PRIMARY KEY (Codigo, Id))
CREATE TABLE EncuestaGrAsignaturas (CursoAc VARCHAR(255) NOT NULL, Fecha_de_Envio VARCHAR(255) NOT NULL, PRIMARY KEY (CursoAc, Fecha_de_Envio))
CREATE TABLE EXPEDIENTE_ENCUESTA (Expediente_IDEXPEDIENTE VARCHAR(255) NOT NULL, encuestas_FECHA_DE_ENVIO DATE NOT NULL, PRIMARY KEY (Expediente_IDEXPEDIENTE, encuestas_FECHA_DE_ENVIO))
CREATE TABLE EXPEDIENTE_MATRICULA (Expediente_IDEXPEDIENTE VARCHAR(255) NOT NULL, matriculas_CURSO_ACADEMICO BIGINT NOT NULL, PRIMARY KEY (Expediente_IDEXPEDIENTE, matriculas_CURSO_ACADEMICO))
CREATE TABLE Encuesta (referencia VARCHAR(255) NOT NULL, curso_act VARCHAR(255) NOT NULL, PRIMARY KEY (referencia, curso_act))
CREATE TABLE GRUPO_CLASE (Grupo_ID VARCHAR(255) NOT NULL, HORAINICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, PRIMARY KEY (Grupo_ID, HORAINICIO, DIA))
CREATE TABLE GRUPO_GRUPO (Grupo_ID VARCHAR(255) NOT NULL, grupos_ID VARCHAR(255) NOT NULL, PRIMARY KEY (Grupo_ID, grupos_ID))
CREATE TABLE GRUPO_GR_ASIG (Grupo_ID VARCHAR(255) NOT NULL, grupos_asig_CURSO_ACT INTEGER NOT NULL, PRIMARY KEY (Grupo_ID, grupos_asig_CURSO_ACT))
CREATE TABLE GRUPO_MAT_ASIG (Grupo_ID VARCHAR(255) NOT NULL, ASIGNATURA_REFERENCIA VARCHAR(255) NOT NULL, MATRICULA_CURSO_ACADEMICO BIGINT NOT NULL, PRIMARY KEY (Grupo_ID, ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO))
CREATE TABLE MATRICULA_MAT_ASIG (Matricula_CURSO_ACADEMICO BIGINT NOT NULL, ASIGNATURA_REFERENCIA VARCHAR(255) NOT NULL, PRIMARY KEY (Matricula_CURSO_ACADEMICO, ASIGNATURA_REFERENCIA))
CREATE TABLE TITULACION_ASIGNATURA (Titulacion_CODIGO VARCHAR(255) NOT NULL, asignatura_REFERENCIA VARCHAR(255) NOT NULL, PRIMARY KEY (Titulacion_CODIGO, asignatura_REFERENCIA))
CREATE TABLE TITULACION_EXPEDIENTE (Titulacion_CODIGO VARCHAR(255) NOT NULL, expedientes_IDEXPEDIENTE VARCHAR(255) NOT NULL, PRIMARY KEY (Titulacion_CODIGO, expedientes_IDEXPEDIENTE))
CREATE TABLE Centro (ID VARCHAR(255) NOT NULL, Codigo VARCHAR(255) NOT NULL, PRIMARY KEY (ID, Codigo))
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ENCUESTA ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_IDEXPEDIENTE FOREIGN KEY (EXPEDIENTE_IDEXPEDIENTE) REFERENCES EXPEDIENTE (IDEXPEDIENTE)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ALUMNO_ID_DNI FOREIGN KEY (ALUMNO_ID_DNI) REFERENCES ALUMNO (ID_DNI)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE GR_ASIG ADD CONSTRAINT FK_GR_ASIG_GROUP_ID FOREIGN KEY (GROUP_ID) REFERENCES GRUPO (ID)
ALTER TABLE GR_ASIG ADD CONSTRAINT FK_GR_ASIG_ASIG_REFERENCIA FOREIGN KEY (ASIG_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_TITULO_CODIGO FOREIGN KEY (TITULO_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE MAT_ASIG ADD CONSTRAINT FK_MAT_ASIG_MATRICULA_CURSO_ACADEMICO FOREIGN KEY (MATRICULA_CURSO_ACADEMICO) REFERENCES MATRICULA (CURSO_ACADEMICO)
ALTER TABLE MAT_ASIG ADD CONSTRAINT FK_MAT_ASIG_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE MAT_ASIG ADD CONSTRAINT FK_MAT_ASIG_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE ASIGNATURA_CLASE ADD CONSTRAINT FK_ASIGNATURA_CLASE_HORAINICIO FOREIGN KEY (HORAINICIO, DIA, GRUPO_ID) REFERENCES CLASE (HORAINICIO, DIA, GRUPO_ID)
ALTER TABLE ASIGNATURA_CLASE ADD CONSTRAINT FK_ASIGNATURA_CLASE_Asignatura_REFERENCIA FOREIGN KEY (Asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE Gr_Asig ADD CONSTRAINT FK_Gr_Asig_asig_Ref FOREIGN KEY (asig_Ref) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE Gr_Asig ADD CONSTRAINT FK_Gr_Asig_grupo_Id FOREIGN KEY (grupo_Id) REFERENCES GRUPO (ID)
ALTER TABLE ASIGNATURA_MAT_ASIG ADD CONSTRAINT FK_ASIGNATURA_MAT_ASIG_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO) REFERENCES MAT_ASIG (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO)
ALTER TABLE ASIGNATURA_MAT_ASIG ADD CONSTRAINT FK_ASIGNATURA_MAT_ASIG_Asignatura_REFERENCIA FOREIGN KEY (Asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE Mat_Asig ADD CONSTRAINT FK_Mat_Asig_asig_Ref FOREIGN KEY (asig_Ref) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE Mat_Asig ADD CONSTRAINT FK_Mat_Asig_matric_ca FOREIGN KEY (matric_ca) REFERENCES MATRICULA (CURSO_ACADEMICO)
ALTER TABLE CentroTitulacion ADD CONSTRAINT FK_CentroTitulacion_Id FOREIGN KEY (Id) REFERENCES GRUPO (ID)
ALTER TABLE CentroTitulacion ADD CONSTRAINT FK_CentroTitulacion_Codigo FOREIGN KEY (Codigo) REFERENCES CENTRO (Codigo)
ALTER TABLE EncuestaGrAsignaturas ADD CONSTRAINT FK_EncuestaGrAsignaturas_CursoAc FOREIGN KEY (CursoAc) REFERENCES ENCUESTA (CursoAc)
ALTER TABLE EncuestaGrAsignaturas ADD CONSTRAINT FK_EncuestaGrAsignaturas_Fecha_de_Envio FOREIGN KEY (Fecha_de_Envio) REFERENCES GR_ASIG (Fecha_de_Envio)
ALTER TABLE EXPEDIENTE_ENCUESTA ADD CONSTRAINT FK_EXPEDIENTE_ENCUESTA_encuestas_FECHA_DE_ENVIO FOREIGN KEY (encuestas_FECHA_DE_ENVIO) REFERENCES ENCUESTA (FECHA_DE_ENVIO)
ALTER TABLE EXPEDIENTE_ENCUESTA ADD CONSTRAINT FK_EXPEDIENTE_ENCUESTA_Expediente_IDEXPEDIENTE FOREIGN KEY (Expediente_IDEXPEDIENTE) REFERENCES EXPEDIENTE (IDEXPEDIENTE)
ALTER TABLE EXPEDIENTE_MATRICULA ADD CONSTRAINT FK_EXPEDIENTE_MATRICULA_Expediente_IDEXPEDIENTE FOREIGN KEY (Expediente_IDEXPEDIENTE) REFERENCES EXPEDIENTE (IDEXPEDIENTE)
ALTER TABLE EXPEDIENTE_MATRICULA ADD CONSTRAINT FK_EXPEDIENTE_MATRICULA_matriculas_CURSO_ACADEMICO FOREIGN KEY (matriculas_CURSO_ACADEMICO) REFERENCES MATRICULA (CURSO_ACADEMICO)
ALTER TABLE Encuesta ADD CONSTRAINT FK_Encuesta_referencia FOREIGN KEY (referencia) REFERENCES GR_ASIG (Fecha_de_Envio)
ALTER TABLE Encuesta ADD CONSTRAINT FK_Encuesta_curso_act FOREIGN KEY (curso_act) REFERENCES ENCUESTA (curso_act)
ALTER TABLE GRUPO_CLASE ADD CONSTRAINT FK_GRUPO_CLASE_HORAINICIO FOREIGN KEY (HORAINICIO, DIA, GRUPO_ID) REFERENCES CLASE (HORAINICIO, DIA, GRUPO_ID)
ALTER TABLE GRUPO_CLASE ADD CONSTRAINT FK_GRUPO_CLASE_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_grupos_ID FOREIGN KEY (grupos_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_GR_ASIG ADD CONSTRAINT FK_GRUPO_GR_ASIG_grupos_asig_CURSO_ACT FOREIGN KEY (grupos_asig_CURSO_ACT) REFERENCES GR_ASIG (CURSO_ACT)
ALTER TABLE GRUPO_GR_ASIG ADD CONSTRAINT FK_GRUPO_GR_ASIG_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_MAT_ASIG ADD CONSTRAINT FK_GRUPO_MAT_ASIG_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_MAT_ASIG ADD CONSTRAINT FK_GRUPO_MAT_ASIG_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO) REFERENCES MAT_ASIG (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO)
ALTER TABLE MATRICULA_MAT_ASIG ADD CONSTRAINT FK_MATRICULA_MAT_ASIG_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO) REFERENCES MAT_ASIG (ASIGNATURA_REFERENCIA, MATRICULA_CURSO_ACADEMICO)
ALTER TABLE MATRICULA_MAT_ASIG ADD CONSTRAINT FK_MATRICULA_MAT_ASIG_Matricula_CURSO_ACADEMICO FOREIGN KEY (Matricula_CURSO_ACADEMICO) REFERENCES MATRICULA (CURSO_ACADEMICO)
ALTER TABLE TITULACION_ASIGNATURA ADD CONSTRAINT FK_TITULACION_ASIGNATURA_Titulacion_CODIGO FOREIGN KEY (Titulacion_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE TITULACION_ASIGNATURA ADD CONSTRAINT FK_TITULACION_ASIGNATURA_asignatura_REFERENCIA FOREIGN KEY (asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE TITULACION_EXPEDIENTE ADD CONSTRAINT FK_TITULACION_EXPEDIENTE_expedientes_IDEXPEDIENTE FOREIGN KEY (expedientes_IDEXPEDIENTE) REFERENCES EXPEDIENTE (IDEXPEDIENTE)
ALTER TABLE TITULACION_EXPEDIENTE ADD CONSTRAINT FK_TITULACION_EXPEDIENTE_Titulacion_CODIGO FOREIGN KEY (Titulacion_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE Centro ADD CONSTRAINT FK_Centro_ID FOREIGN KEY (ID) REFERENCES TITULACION (ID)
ALTER TABLE Centro ADD CONSTRAINT FK_Centro_Codigo FOREIGN KEY (Codigo) REFERENCES CENTRO (Codigo)
